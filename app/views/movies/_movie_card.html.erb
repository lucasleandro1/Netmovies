<div class="card h-100 shadow-sm">
  <% if movie.poster.attached? %>
    <div class="position-relative overflow-hidden" style="height: 400px;">
      <%= image_tag movie.poster, class: "card-img-top w-100 h-100", style: "object-fit: cover; object-position: center;" %>
    </div>
  <% else %>
    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 400px;">
      <i class="fas fa-film fa-4x text-muted"></i>
    </div>
  <% end %>
  
  <div class="card-body d-flex flex-column p-3">
    <h5 class="card-title mb-2 fw-bold">
      <%= link_to movie.title, movie_path(movie), class: "text-decoration-none text-dark" %>
    </h5>
    <p class="card-text text-muted mb-3 flex-grow-1" style="font-size: 0.9rem;">
      <%= truncate(movie.synopsis, length: 80) %>
    </p>
    
    <div class="mt-auto">
      <div class="mb-2">
        <% movie.categories.limit(2).each do |category| %>
          <span class="badge bg-primary me-1" style="font-size: 0.75rem;"><%= category.name %></span>
        <% end %>
        <% if movie.categories.count > 2 %>
          <span class="badge bg-secondary" style="font-size: 0.75rem;">+<%= movie.categories.count - 2 %></span>
        <% end %>
      </div>
      
      <div class="mb-2">
        <small class="text-muted d-block" style="font-size: 0.8rem;">
          <i class="fas fa-calendar me-1"></i><%= movie.year %>
          <span class="mx-2">â€¢</span>
          <i class="fas fa-clock me-1"></i><%= movie.display_duration %>
        </small>
        <small class="text-muted d-block" style="font-size: 0.8rem;">
          <i class="fas fa-user-edit me-1"></i><%= truncate(movie.director, length: 20) %>
        </small>
      </div>
      
      <div class="d-flex justify-content-between align-items-center">
        <%= link_to t('movies.view_details'), movie_path(movie), class: "btn btn-sm btn-primary" %>
        <small class="text-muted">
          <i class="fas fa-comments me-1"></i><%= movie.comments.count %>
        </small>
      </div>
    </div>
  </div>
</div>
<% content_for :title, t('movie_imports.title') %>

<div class="d-flex justify-content-between align-items-center mb-4">
  <h1><i class="fas fa-upload"></i> <%= t('movie_imports.title') %></h1>
  <%= link_to t('movie_imports.new'), new_movie_import_path, class: "btn btn-primary" %>
</div>

<% if @movie_imports.any? %>
  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th><%= t('movie_imports.description') %></th>
          <th><%= t('movie_imports.status') %></th>
          <th><%= t('movie_imports.processed') %></th>
          <th><%= t('movie_imports.errors') %></th>
          <th><%= t('movie_imports.created_at') %></th>
          <th><%= t('movie_imports.actions') %></th>
        </tr>
      </thead>
      <tbody>
        <% @movie_imports.each do |import| %>
          <tr>
            <td><%= import.file_name %></td>
            <td>
              <% case import.status %>
              <% when 'pending' %>
                <span class="badge bg-warning"><%= t('movie_imports.status_pending') %></span>
              <% when 'processing' %>
                <span class="badge bg-info"><%= t('movie_imports.status_processing') %></span>
              <% when 'completed' %>
                <span class="badge bg-success"><%= t('movie_imports.status_completed') %></span>
              <% when 'failed' %>
                <span class="badge bg-danger"><%= t('movie_imports.status_failed') %></span>
              <% end %>
            </td>
            <td><%= import.processed_count || 0 %></td>
            <td><%= import.error_count || 0 %></td>
            <td><%= l(import.created_at, format: :short) %></td>
            <td>
              <%= link_to t('movie_imports.view'), import, class: "btn btn-sm btn-outline-primary" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="d-flex justify-content-center">
    <%= paginate @movie_imports %>
  </div>
  <% else %>
  <div class="text-center py-5">
    <i class="fas fa-upload fa-3x text-muted mb-3"></i>
    <h3 class="text-muted"><%= t('movie_imports.no_imports') %></h3>
    <p class="text-muted"><%= t('movie_imports.no_imports_description') %></p>
    <%= link_to t('movie_imports.new'), new_movie_import_path, class: "btn btn-primary" %>
  </div>
<% end %>
